<!--chart.html -->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Mosaic Visualization Dashboard</title>
    <link rel="stylesheet" href="billboard.css">
    <link href="tabulator.min.css" rel="stylesheet">
    <script type="text/javascript" src="tabulator.min.js"></script>
    <style>
        .parent { 
        display: grid; 
        grid-template-columns: repeat(2, 1fr); 
        grid-template-rows: repeat(2, 1fr); 
        grid-column-gap: 1px;
        grid-row-gap: 1px; 
        align-items: center;
        }
        .parent2 { 
        display: grid; 
        grid-template-columns: repeat(2, 1fr); 
        grid-template-rows: 1fr;
        grid-column-gap: 1px;
        align-items: center;
        }
        .parent3 { 
        display: grid; 
        grid-template-columns: repeat(2, 1fr); 
        grid-template-rows: repeat(7, 1fr); 
        gap: 1px;
        align-items: center;
        }
        .chart {
        width: 100%;
        height: 100%;
        box-sizing: border-box;
        padding: 1px;
        float: left;
        align-self: center;
        }
        .minichart {
        width: 25%;
        height: 25%;
        box-sizing: border-box;
        float: left;
        align-self: center;
        }
        h1 {
        text-align: center;
        }
        h2 {
        text-align: center;
        }
        h4 {
        text-align: center;
        }
      html * {
        font-family: Trebuchet MS, sans-serif;
      }
    </style>
  </head>
  <body>
    <h1>Camp Mosaic Application Dashboard - 2023</h1>
    <h4>Updated 5/22/2023 @ 1AM CST</h4>
    <!-- First block of 4 charts -->
    <div class="parent">
		<div class="chart">
            <h2>National CGS Applications</h2>
            <div id="chart1"></div>
        </div>
        <div class="chart">
            <h2>National Participant Applications</h2>
            <div id="chart2"></div>
        </div>
        <div class="chart">
          <h2>National CGS Gender Breakdown</h2>
          <div id="data-table-2"></div>
        </div>
        <div class="chart">
          <h2>National Participant Gender Breakdown</h2>
          <div id="data-table"></div>
        </div>
    </div>
    <!-- block of 2 tables -->
    <div class="parent2">
        
    </div>
        <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="billboard.js"> </script>
    <script>

        // deprecated code for linking to sheets API and linking data for charts/tables 

        // var sheetlink = "https://docs.google.com/spreadsheets/d/1THRK-uCxD33_QjsaN1S68OdegI8PFay1cbKknHcs5wQ/edit#gid=0";
        // var api_key = "146019044830-1c4mhf1ahuttqka2p08l1ufajuu10qea.apps.googleusercontent.com";
        
        // fetch('https://sheets.googleapis.com/v4/spreadsheets/' + sheetlink + '/values/CGSSheet!A1:B10?key=' + api_key)
        //     .then(response => response.json())
        //     .then(data => {
                
        //         var chart = bb.generate({
        //             data: {
        //                 columns: data.values
        //             },
        //             bindto: "#chart"
        //         });
        //     })
        //     .catch(error => console.error(error));

        var chart = bb.generate({
            data: {
                x: ' ',
                columns: [
                    [   ' ',
                        'Southeast',
                        'Central',
                        'Southwest',
                        'Florida',
                        'Midwest',
                        'West',
                        'Northeast'
                    ],
                    ['Staff',78, 48, 74, 20, 24, 10, 34],
                    ['Guide',184, 182, 154, 37, 46, 51, 64],
                    ['Counselor',200, 133, 181, 33, 58, 55, 57],
                    ['Incomplete',30, 35, 41, 6, 3, 7, 33]
                ],
                type: "bar", // for ESM specify as: bar(),
                labels: null,
                colors: {Staff: '#3498DB', Guide: '#2ECC71', Counselor: '#F2E361', Incomplete: '#F10F61'},
                color:null,
                axes: { Staff: 'y', Guide: 'y', Counselor: 'y', Incomplete: 'y' },
                labels:null,
                hide:[],
                groups: [['Staff','Guide','Counselor', 'Incomplete']],
                order: 'null'
            },
            axis: {
                x: {
                    type:"category",
                    label: {
                        text: "Region",
                        position: "outer-center"
                }
                },
                y: {
                    label: {
                        text: "# of Applications",
                        position: "outer-middle"
                }
                }
            },
            grid: {
                y: {
                lines: [
                    {
                    value: 0
                    }
                ]
                }
            },
            legend: {
                show: true,
                item: {}
            },
            bindto: "#chart1"
        });

        var chart = bb.generate({
            data: {
                x: ' ',
                columns: [
                    [   ' ',
                        'Southeast',
                        'Central',
                        'Southwest',
                        'Florida',
                        'Midwest',
                        'West',
                        'Northeast'
                    ],
                    ['Complete',379, 511, 424, 89, 100, 112, 126],
                    ['Incomplete',50, 93, 43, 14, 12, 40, 20]
                ],
                type: "bar", // for ESM specify as: bar(),
                labels: null,
                colors: {Complete: '#3498DB', Incomplete: '#CC2E6D'},
                color:null,
                axes: { Complete: 'y', Incomplete: 'y'},
                labels:null,
                hide:[],
                groups: [['Complete','Incomplete']],
                order: 'null'
            },
            axis: {
                x: {
                    type:"category",
                    label: {
                        text: "Region",
                        position: "outer-center"
                }
                },
                y: {
                    label: {
                        text: "# of Applications",
                        position: "outer-middle"
                }
                }
            },
            grid: {
                y: {
                lines: [
                    {
                    value: 0
                    }
                ]
                }
            },
            legend: {
                show: true,
                item: {}
            },
            bindto: "#chart2"
        });

        // PPANT
        var tableData = [
          {Gender:"Male", Count:811},
          {Gender:"Female", Count:891},
          {Gender:"Prefer Not to Say", Count:42},
        ];
    
        // Define your table columns as an array of objects
        var tableColumns = [
          {title:"Gender", field:"Gender"},
          {title:"Count", field:"Count"}
        ];
    
        // Create a new Tabulator table instance
        var table = new Tabulator("#data-table", {
          data: tableData,
          minheight: 500,
          columns: tableColumns,
          layout:"fitColumns",
          responsiveLayout:true
        });

        var data = {
            columns: [
            ["English", 75],
            ["Hindi/Urdu", 13],
            ["Gujarati", 4],
            ["Kutchi", 3],
            ["Pashto", 2],
            ["Spanish", 2],
            ],
            type: "pie",
        };

        // CGS
        var tableData = [
          {Gender:"Male", Count:587},
          {Gender:"Female", Count:753},
          {Gender:"Prefer Not to Say", Count:3},
        ];
    
        // Define your table columns as an array of objects
        var tableColumns = [
          {title:"Gender", field:"Gender"},
          {title:"Count", field:"Count"}
        ];
    
        // Create a new Tabulator table instance
        var table = new Tabulator("#data-table-2", {
          data: tableData,
          columns: tableColumns,
          layout:"fitColumns",
          responsiveLayout:true
        });

    </script>
  </body>
</html>